@import "./styles/wex.tokens.css";
@import "./styles/wex.shadcn-bridge.css";
@import "./styles/wex.components-bridge.css";

@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  * {
    @apply border-border;
  }
  body {
    @apply bg-background text-foreground;
  }
  
  /* Text selection colors */
  ::selection {
    background-color: hsl(var(--wex-palette-blue-100));
    color: hsl(var(--wex-palette-blue-900));
  }
  .dark ::selection {
    background-color: hsl(var(--wex-palette-blue-800));
    color: hsl(var(--wex-palette-blue-100));
  }
}

@layer utilities {
  /* Hide scrollbar while maintaining scroll functionality */
  .scrollbar-hide {
    -ms-overflow-style: none;
    scrollbar-width: none;
  }
  .scrollbar-hide::-webkit-scrollbar {
    display: none;
  }
  
  /* Indeterminate progress bar animation */
  @keyframes progress-indeterminate {
    0% {
      transform: translateX(-100%);
    }
    100% {
      transform: translateX(300%);
    }
  }
  .animate-progress-indeterminate {
    animation: progress-indeterminate 1.5s ease-in-out infinite;
  }
}

/* ============================================================
   SONNER TOAST OVERRIDES
   ============================================================
   Sonner has internal styling with high specificity.
   These overrides ensure proper text contrast for all toast variants.
   Uses Layer 3 component tokens for granular theming.
   ============================================================ */
@layer components {
  /* Error/Destructive toast - Layer 3 tokens */
  [data-sonner-toast][data-type="error"] {
    --normal-bg: hsl(var(--wex-component-toast-destructive-bg));
    --normal-border: hsl(var(--wex-component-toast-destructive-border));
    --normal-text: hsl(var(--wex-component-toast-destructive-fg));
    background: var(--normal-bg) !important;
    border-color: var(--normal-border) !important;
    color: var(--normal-text) !important;
  }
  [data-sonner-toast][data-type="error"] [data-title],
  [data-sonner-toast][data-type="error"] [data-description] {
    color: hsl(var(--wex-component-toast-destructive-fg)) !important;
  }

  /* Success toast - Layer 3 tokens */
  [data-sonner-toast][data-type="success"] {
    --normal-bg: hsl(var(--wex-component-toast-success-bg));
    --normal-border: hsl(var(--wex-component-toast-success-border));
    --normal-text: hsl(var(--wex-component-toast-success-fg));
    background: var(--normal-bg) !important;
    border-color: var(--normal-border) !important;
    color: var(--normal-text) !important;
  }
  [data-sonner-toast][data-type="success"] [data-title],
  [data-sonner-toast][data-type="success"] [data-description] {
    color: hsl(var(--wex-component-toast-success-fg)) !important;
  }

  /* Warning toast - Layer 2 (no dedicated Layer 3 tokens yet) */
  [data-sonner-toast][data-type="warning"] {
    --normal-bg: hsl(var(--warning));
    --normal-border: hsl(var(--warning));
    --normal-text: hsl(var(--warning-foreground));
    background: var(--normal-bg) !important;
    border-color: var(--normal-border) !important;
    color: var(--normal-text) !important;
  }
  [data-sonner-toast][data-type="warning"] [data-title],
  [data-sonner-toast][data-type="warning"] [data-description] {
    color: hsl(var(--warning-foreground)) !important;
  }

  /* Info toast - Layer 3 tokens */
  [data-sonner-toast][data-type="info"] {
    --normal-bg: hsl(var(--wex-component-toast-info-bg));
    --normal-border: hsl(var(--wex-component-toast-info-border));
    --normal-text: hsl(var(--wex-component-toast-info-fg));
    background: var(--normal-bg) !important;
    border-color: var(--normal-border) !important;
    color: var(--normal-text) !important;
  }
  [data-sonner-toast][data-type="info"] [data-title],
  [data-sonner-toast][data-type="info"] [data-description] {
    color: hsl(var(--wex-component-toast-info-fg)) !important;
  }
}

/* ============================================================
   MESH ANIMATIONS
   ============================================================ */
@keyframes mesh-drift {
  0% { transform: translate(0, 0) rotate(0deg) scale(1); }
  33% { transform: translate(15%, -10%) rotate(10deg) scale(1.1); }
  66% { transform: translate(-10%, 15%) rotate(-10deg) scale(0.9); }
  100% { transform: translate(0, 0) rotate(0deg) scale(1); }
}

.animate-mesh {
  animation: mesh-drift 25s infinite ease-in-out;
  will-change: transform;
}

.animate-mesh-slow {
  animation: mesh-drift 35s infinite reverse ease-in-out;
  will-change: transform;
}

.animate-mesh-delayed {
  animation: mesh-drift 30s infinite 2s ease-in-out;
  will-change: transform;
}

/* ============================================================
   PRISM SYNTAX HIGHLIGHTING OVERRIDES
   WEX Design System themed - adapts to light/dark mode
   ============================================================ */

/* Base code styling */
pre[class*="language-"],
code[class*="language-"] {
  background: transparent !important;
  text-shadow: none !important;
  color: hsl(var(--foreground));
}

/* Comments - muted */
.token.comment,
.token.prolog,
.token.doctype,
.token.cdata {
  color: hsl(var(--muted-foreground));
  font-style: italic;
}

/* Punctuation - subtle foreground */
.token.punctuation {
  color: hsl(var(--muted-foreground));
}

/* Properties, tags, numbers - primary blue */
.token.property,
.token.tag,
.token.boolean,
.token.number,
.token.constant,
.token.symbol,
.token.deleted {
  color: hsl(var(--primary));
}

/* Strings, inserted - success green */
.token.selector,
.token.attr-name,
.token.string,
.token.char,
.token.builtin,
.token.inserted {
  color: hsl(var(--success));
}

/* Operators, entities - foreground */
.token.operator,
.token.entity,
.token.url,
.language-css .token.string,
.style .token.string {
  color: hsl(var(--foreground));
}

/* Keywords - destructive/brand red */
.token.atrule,
.token.attr-value,
.token.keyword {
  color: hsl(var(--brand-red));
}

/* Functions, class names - info blue/cyan */
.token.function,
.token.class-name {
  color: hsl(var(--info));
}

/* Regex, variables - warning amber */
.token.regex,
.token.important,
.token.variable {
  color: hsl(var(--warning));
}
